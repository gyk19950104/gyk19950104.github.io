<!DOCTYPE html>
<html lang=><head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title> 7.数据库 - gyk&#39;s blog</title>
    <meta name="description" content="1.数据库分类  关系数据库：oracle，mysql 非关系数据库：mongodb，redis  2.基本概念  1.DQL数据查询语句，DDL数据定义语言，DCL数据控制语言，TCL事务控制语言。 2.主键：可查询到唯一对应的数据，是非空且唯一的,如果是整数类型则需要自增。 3.非外键约束：对单表字段的限定条件 4.外键约束：多表间有联系的字段添加限制条件 5.级联操作：操作主表时影响从表的外键信息 6.事务：多条sql命令完成一件事，具有原子性，一致性，隔离性，持久性 7.脏读：一个事务读取了另一个没提交的事务 8.幻读：同一事务中，读取了其他插入的数据，导致前后结果不一致  3.常用sql命令 //1.登陆数据库 mysql -u root -p rootroot //2.查看信息 show databases; show tables; select * from 表; desc t_student; show create table t_student; //3.操作数据 ## 创建表格 create table t_student( sno int(6) primary key auto_increment, sname varchar(5) not null, sex char(1) default &#39;男&#39; check(sex=&#39;男&#39;|| sex=&#39;女&#39;), sage int(3) check(sage&gt;=18 and sage&lt;=50), enterdate date, classname varchar(10), email varchar(15) unique ); ## 插入数据 insert into t_student values(); alter table t_student add score double(5,2) first/after; alter table t_student drop score; ## 修改数据 update t_student set sex = &#39;女&#39; where sno = 1; ## 删除数据 delete from t_student where sno=1; drop table t_student; ## 外键 ## 班级表 create table t_class( cno int(6) primary key auto_increment, cname varchar(10) not null, room char(4) ); insert into t_class values(null,&#39;java001&#39;,&#39;r803&#39;); insert into t_class values(null,&#39;java002&#39;,&#39;r416&#39;); insert into t_class values(null,&#39;java002&#39;,&#39;r103&#39;); ## 学生表 create table t_student( sno int(6) primary key auto_increment, sname varchar(5) not null, cno int(4), constraint fk_stu_cno foreign key(cno) references t_class(cno) ); insert into t_student values(null,&#39;章三&#39;,1),(null,&#39;里斯&#39;,1),(null,&#39;王武&#39;,2); ## 事务 //4.">
    <link rel="canonical" href="https://gyk19950104.github.io/backend/7.%E6%95%B0%E6%8D%AE%E5%BA%93/">
    <meta property="og:title" content="7.数据库">
    <meta property="og:type" content="article">
    <meta property="og:url" content="https://gyk19950104.github.io/backend/7.%E6%95%B0%E6%8D%AE%E5%BA%93/">
    <meta property="og:description" content="1.数据库分类  关系数据库：oracle，mysql 非关系数据库：mongodb，redis  2.基本概念  1.DQL数据查询语句，DDL数据定义语言，DCL数据控制语言，TCL事务控制语言。 2.主键：可查询到唯一对应的数据，是非空且唯一的,如果是整数类型则需要自增。 3.非外键约束：对单表字段的限定条件 4.外键约束：多表间有联系的字段添加限制条件 5.级联操作：操作主表时影响从表的外键信息 6.事务：多条sql命令完成一件事，具有原子性，一致性，隔离性，持久性 7.脏读：一个事务读取了另一个没提交的事务 8.幻读：同一事务中，读取了其他插入的数据，导致前后结果不一致  3.常用sql命令 //1.登陆数据库 mysql -u root -p rootroot //2.查看信息 show databases; show tables; select * from 表; desc t_student; show create table t_student; //3.操作数据 ## 创建表格 create table t_student( sno int(6) primary key auto_increment, sname varchar(5) not null, sex char(1) default &#39;男&#39; check(sex=&#39;男&#39;|| sex=&#39;女&#39;), sage int(3) check(sage&gt;=18 and sage&lt;=50), enterdate date, classname varchar(10), email varchar(15) unique ); ## 插入数据 insert into t_student values(); alter table t_student add score double(5,2) first/after; alter table t_student drop score; ## 修改数据 update t_student set sex = &#39;女&#39; where sno = 1; ## 删除数据 delete from t_student where sno=1; drop table t_student; ## 外键 ## 班级表 create table t_class( cno int(6) primary key auto_increment, cname varchar(10) not null, room char(4) ); insert into t_class values(null,&#39;java001&#39;,&#39;r803&#39;); insert into t_class values(null,&#39;java002&#39;,&#39;r416&#39;); insert into t_class values(null,&#39;java002&#39;,&#39;r103&#39;); ## 学生表 create table t_student( sno int(6) primary key auto_increment, sname varchar(5) not null, cno int(4), constraint fk_stu_cno foreign key(cno) references t_class(cno) ); insert into t_student values(null,&#39;章三&#39;,1),(null,&#39;里斯&#39;,1),(null,&#39;王武&#39;,2); ## 事务 //4.">
    <meta property="og:site_name" content="gyk&#39;s blog">
    <link rel="stylesheet" href="https://gyk19950104.github.io/css/main.min.7fdf1d02dafd1a6eb5cfd0d707e17e33515b866f5d305a0ab01a4095577484fe.css" integrity="sha256-f98dAtr9Gm61z9DXB&#43;F&#43;M1Fbhm9dMFoKsBpAlVd0hP4=">
    <meta name="generator" content="Hugo 0.73.0" />
    <script type="module" src="https://unpkg.com/ionicons@5.1.2/dist/ionicons/ionicons.esm.js"></script>
    <script nomodule="" src="https://unpkg.com/ionicons@5.1.2/dist/ionicons/ionicons.js"></script>
    
</head>
<body><header class="site-header">
    <nav class="site-nav" role="navigation" aria-label="breadcrumb">
    <ol itemscope itemtype="https://schema.org/BreadcrumbList" class="breadcrumb"><li class="breadcrumb-item  " 
  itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem">
  <a itemtype="https://schema.org/Thing" itemprop="item" href="https://gyk19950104.github.io/">
    <span itemprop="name">gyk&#39;s blog</span>
  </a>
  <meta itemprop="position" content="0" />
</li>/<li class="breadcrumb-item  " 
  itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem">
  <a itemtype="https://schema.org/Thing" itemprop="item" href="https://gyk19950104.github.io/backend/">
    <span itemprop="name">backend</span>
  </a>
  <meta itemprop="position" content="0" />
</li>/<li class="breadcrumb-item active hidden" aria-current="page"
  itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem">
  <a itemtype="https://schema.org/Thing" itemprop="item" href="https://gyk19950104.github.io/backend/7.%E6%95%B0%E6%8D%AE%E5%BA%93/">
    <span itemprop="name">7.%E6%95%B0%E6%8D%AE%E5%BA%93</span>
  </a>
  <meta itemprop="position" content="1" />
</li></ol>
    </nav>
    <h1 class="site-title hidden">
    <a href="https://gyk19950104.github.io">gyk&#39;s blog</a>
    </h1>
</header>
<div>先有逻辑正确的思路，剩余的是重复的实践与积累</div>
<main id="content">
<article role="article" class="content post h-entry" itemscope="" itemtype="http://schema.org/BlogPosting">
    <header class="post-header">        
        <h2 class="post-title" itemprop="name headline">7.数据库</h2>
        <span class="post-meta">
            <time class="date-published" datetime="2021-06-10T20:03:59&#43;07:00" itemprop="datePublished">
                Thu, 10 Jun 2021
            </time>
            
        </span>
    </header>
    <div class="post-content" itemprop="articleBody">
        <h2 id="1数据库分类">1.数据库分类</h2>
<ul>
<li>关系数据库：oracle，mysql</li>
<li>非关系数据库：mongodb，redis</li>
</ul>
<h2 id="2基本概念">2.基本概念</h2>
<ul>
<li>1.DQL数据查询语句，DDL数据定义语言，DCL数据控制语言，TCL事务控制语言。</li>
<li>2.主键：可查询到唯一对应的数据，是非空且唯一的,如果是整数类型则需要自增。</li>
<li>3.非外键约束：对单表字段的限定条件</li>
<li>4.外键约束：多表间有联系的字段添加限制条件</li>
<li>5.级联操作：操作主表时影响从表的外键信息</li>
<li>6.事务：多条sql命令完成一件事，具有原子性，一致性，隔离性，持久性</li>
<li>7.脏读：一个事务读取了另一个没提交的事务</li>
<li>8.幻读：同一事务中，读取了其他插入的数据，导致前后结果不一致</li>
</ul>
<h2 id="3常用sql命令">3.常用sql命令</h2>
<pre><code>//1.登陆数据库
mysql -u root -p
rootroot

//2.查看信息
show databases;
show tables;
select * from 表;
desc t_student;
show create table t_student;


//3.操作数据
## 创建表格
create table t_student(
    sno int(6) primary key auto_increment,
	sname varchar(5) not null,
	sex char(1) default '男' check(sex='男'|| sex='女'),
	sage int(3) check(sage&gt;=18 and sage&lt;=50),
	enterdate date,
	classname varchar(10),
	email varchar(15) unique
);

## 插入数据
insert into t_student values();
alter table t_student add score double(5,2) first/after;
alter table t_student drop score;


## 修改数据
update t_student set sex = '女' where sno = 1;


## 删除数据
delete from t_student where sno=1; 
drop table t_student;

## 外键
## 班级表
create table t_class(
  cno int(6) primary key auto_increment,
	cname varchar(10) not null,
	room char(4)
);
insert into t_class values(null,'java001','r803');
insert into t_class values(null,'java002','r416');
insert into t_class values(null,'java002','r103');

## 学生表
create table t_student(
  sno int(6) primary key auto_increment,
	sname varchar(5) not null,
	cno int(4),
	constraint fk_stu_cno foreign key(cno) references t_class(cno)
);

insert into t_student values(null,'章三',1),(null,'里斯',1),(null,'王武',2);


## 事务

//4.退出
quit;
exit;
\q;

</code></pre><h2 id="4jdbc">4.JDBC</h2>
<pre><code>//数据库配置信息
db.properties
driver=com.mysql.cj.jdbc.Driver
url = jdbc:mysql://localhost:3306/first?useUnicode=true&amp;characterEncoding=UTF-8&amp;useSSL=true
userName=root
password = rootroot
</code></pre><pre><code>//数据库公共类
package wiki.mrx.utils;

import javax.swing.plaf.nimbus.State;
import java.io.InputStream;
import java.sql.*;
import java.util.Properties;

public class JdbcUtils {
    private static String driver = null;
    private static String url = null;
    private static String userName = null;
    private static String password = null;

    static {
        try{
            //1.获取数据库配置信息
            InputStream is = JdbcUtils.class.getClassLoader().getResourceAsStream(&quot;db.properties&quot;);
            Properties properties = new Properties();
            properties.load(is);
            driver = properties.getProperty(&quot;driver&quot;);
            url = properties.getProperty(&quot;url&quot;);
            userName = properties.getProperty(&quot;userName&quot;);
            password = properties.getProperty(&quot;password&quot;);
            //2.加载驱动
            Class.forName(driver);
        }catch (Exception e){
            e.printStackTrace();
        }
    }

    //3.获取连接
    public static Connection getConnection() throws SQLException {
        return DriverManager.getConnection(url,userName,password);
    }

    //4.释放连接
    public static void release(Connection con, Statement st, ResultSet rs){
        //释放结果
        if(rs !=null){
            try {
                rs.close();
            } catch (SQLException throwables) {
                throwables.printStackTrace();
            }
        }
        //释放sql
        if(st != null){
            try {
                st.close();
            } catch (SQLException throwables) {
                throwables.printStackTrace();
            }
        }
        //释放连接
        if(con !=null){
            try {
                con.close();
            } catch (SQLException throwables) {
                throwables.printStackTrace();
            }
        }
    }
}
</code></pre><pre><code>package wiki.mrx;

import wiki.mrx.utils.JdbcUtils;

import java.sql.*;

public class TestInsert {
    public static void main(String[] args) {
        Connection connection = null;
        PreparedStatement preparedStatement = null;
        ResultSet resultSet = null;

        try {
            //1.获取数据库连接
            connection = JdbcUtils.getConnection();
            //2.获得sql执行对象并执行
            String sql = &quot;insert into t_student values(null,'莉丝',2)&quot;;
            preparedStatement = connection.prepareStatement(sql);
            int i = preparedStatement.executeUpdate(sql);

            //3.查看获取到的数据
            if(i&gt;0){
                System.out.println(&quot;插入成功&quot;);
            }

        } catch (SQLException throwables) {
            throwables.printStackTrace();
        }finally {
            //4.关闭资源
            JdbcUtils.release(connection,preparedStatement,null);
        }
    }
}
</code></pre>
    </div>
</article>
<div class="pagination">
    
    <div class="prev"> <a href="https://gyk19950104.github.io/backend/6.java%E6%9D%82%E9%A1%B9/">Previous Post</a> </div>
    
    
</div>


        </main><footer class="site-footer">
	<span class="right">
		<em>gyk&#39;s blog</em>
	</span>
</footer>
</body>
</html>
